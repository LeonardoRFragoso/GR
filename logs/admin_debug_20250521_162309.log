2025-05-21 16:23:14,233 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,236 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477775DA80>, <sqlite3.Row object at 0x000001477775DB70>, <sqlite3.Row object at 0x000001477775DC30>, <sqlite3.Row object at 0x000001477775DC60>, <sqlite3.Row object at 0x000001477775DC90>, <sqlite3.Row object at 0x000001477775DCC0>, <sqlite3.Row object at 0x000001477775DCF0>, <sqlite3.Row object at 0x000001477775DD20>, <sqlite3.Row object at 0x000001477775DD50>, <sqlite3.Row object at 0x000001477775DD80>, <sqlite3.Row object at 0x000001477775DDE0>, <sqlite3.Row object at 0x000001477775DE40>]
2025-05-21 16:23:14,236 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,236 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,236 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,237 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,237 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,238 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,238 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,238 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,238 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,239 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,239 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,239 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,240 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,240 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,240 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,241 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477775DA80>, <sqlite3.Row object at 0x000001477775DE40>, <sqlite3.Row object at 0x000001477775DEA0>, <sqlite3.Row object at 0x000001477775DED0>, <sqlite3.Row object at 0x000001477775DF00>]
2025-05-21 16:23:14,242 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,242 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,243 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,243 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,243 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477775DED0>, <sqlite3.Row object at 0x000001477775DF60>, <sqlite3.Row object at 0x000001477775DF90>, <sqlite3.Row object at 0x000001477775DFC0>, <sqlite3.Row object at 0x000001477775DFF0>, <sqlite3.Row object at 0x000001477775E020>, <sqlite3.Row object at 0x000001477775E050>, <sqlite3.Row object at 0x000001477775E080>, <sqlite3.Row object at 0x000001477775E0B0>, <sqlite3.Row object at 0x000001477775E0E0>, <sqlite3.Row object at 0x000001477775E110>, <sqlite3.Row object at 0x000001477775E140>, <sqlite3.Row object at 0x000001477775E170>, <sqlite3.Row object at 0x000001477775E1A0>, <sqlite3.Row object at 0x000001477775E1D0>, <sqlite3.Row object at 0x000001477775E200>, <sqlite3.Row object at 0x000001477775E230>, <sqlite3.Row object at 0x000001477775E260>, <sqlite3.Row object at 0x000001477775E290>, <sqlite3.Row object at 0x000001477775E2C0>, <sqlite3.Row object at 0x000001477775E2F0>, <sqlite3.Row object at 0x000001477775E320>, <sqlite3.Row object at 0x000001477775E350>, <sqlite3.Row object at 0x000001477775E380>, <sqlite3.Row object at 0x000001477775E3B0>, <sqlite3.Row object at 0x000001477775E3E0>, <sqlite3.Row object at 0x000001477775E410>, <sqlite3.Row object at 0x000001477775E440>, <sqlite3.Row object at 0x000001477775E470>, <sqlite3.Row object at 0x000001477775E4A0>, <sqlite3.Row object at 0x000001477775E4D0>, <sqlite3.Row object at 0x000001477775E500>, <sqlite3.Row object at 0x000001477775E530>, <sqlite3.Row object at 0x000001477775E560>, <sqlite3.Row object at 0x000001477775E590>, <sqlite3.Row object at 0x000001477775E5C0>, <sqlite3.Row object at 0x000001477775E5F0>, <sqlite3.Row object at 0x000001477775E620>, <sqlite3.Row object at 0x000001477775E650>, <sqlite3.Row object at 0x000001477775E680>, <sqlite3.Row object at 0x000001477775E6B0>, <sqlite3.Row object at 0x000001477775E6E0>, <sqlite3.Row object at 0x000001477775E710>, <sqlite3.Row object at 0x000001477775E740>, <sqlite3.Row object at 0x000001477775E770>, <sqlite3.Row object at 0x000001477775E7A0>, <sqlite3.Row object at 0x000001477775E7D0>, <sqlite3.Row object at 0x000001477775E800>, <sqlite3.Row object at 0x000001477775E830>, <sqlite3.Row object at 0x000001477775E860>, <sqlite3.Row object at 0x000001477775E890>, <sqlite3.Row object at 0x000001477775E8C0>, <sqlite3.Row object at 0x000001477775E8F0>]
2025-05-21 16:23:14,244 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477775DED0>, <sqlite3.Row object at 0x000001477775DF60>, <sqlite3.Row object at 0x000001477775DF90>, <sqlite3.Row object at 0x000001477775DFC0>, <sqlite3.Row object at 0x000001477775DFF0>, <sqlite3.Row object at 0x000001477775E020>, <sqlite3.Row object at 0x000001477775E050>, <sqlite3.Row object at 0x000001477775E080>, <sqlite3.Row object at 0x000001477775E0B0>, <sqlite3.Row object at 0x000001477775E0E0>, <sqlite3.Row object at 0x000001477775E110>, <sqlite3.Row object at 0x000001477775E140>, <sqlite3.Row object at 0x000001477775E170>, <sqlite3.Row object at 0x000001477775E1A0>, <sqlite3.Row object at 0x000001477775E1D0>, <sqlite3.Row object at 0x000001477775E200>, <sqlite3.Row object at 0x000001477775E230>, <sqlite3.Row object at 0x000001477775E260>, <sqlite3.Row object at 0x000001477775E290>, <sqlite3.Row object at 0x000001477775E2C0>, <sqlite3.Row object at 0x000001477775E2F0>, <sqlite3.Row object at 0x000001477775E320>, <sqlite3.Row object at 0x000001477775E350>, <sqlite3.Row object at 0x000001477775E380>, <sqlite3.Row object at 0x000001477775E3B0>, <sqlite3.Row object at 0x000001477775E3E0>, <sqlite3.Row object at 0x000001477775E410>, <sqlite3.Row object at 0x000001477775E440>, <sqlite3.Row object at 0x000001477775E470>, <sqlite3.Row object at 0x000001477775E4A0>, <sqlite3.Row object at 0x000001477775E4D0>, <sqlite3.Row object at 0x000001477775E500>, <sqlite3.Row object at 0x000001477775E530>, <sqlite3.Row object at 0x000001477775E560>, <sqlite3.Row object at 0x000001477775E590>, <sqlite3.Row object at 0x000001477775E5C0>, <sqlite3.Row object at 0x000001477775E5F0>, <sqlite3.Row object at 0x000001477775E620>, <sqlite3.Row object at 0x000001477775E650>, <sqlite3.Row object at 0x000001477775E680>, <sqlite3.Row object at 0x000001477775E6B0>, <sqlite3.Row object at 0x000001477775E6E0>, <sqlite3.Row object at 0x000001477775E710>, <sqlite3.Row object at 0x000001477775E740>, <sqlite3.Row object at 0x000001477775E770>, <sqlite3.Row object at 0x000001477775E7A0>, <sqlite3.Row object at 0x000001477775E7D0>, <sqlite3.Row object at 0x000001477775E800>, <sqlite3.Row object at 0x000001477775E830>, <sqlite3.Row object at 0x000001477775E860>, <sqlite3.Row object at 0x000001477775E890>, <sqlite3.Row object at 0x000001477775E8C0>, <sqlite3.Row object at 0x000001477775E8F0>]
2025-05-21 16:23:14,244 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,244 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,244 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,248 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,248 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,248 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,274 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,294 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,296 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x000001477779BF40>, <sqlite3.Row object at 0x000001477779B6A0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x000001477779B640>, <sqlite3.Row object at 0x000001477779B670>, <sqlite3.Row object at 0x000001477779B5B0>, <sqlite3.Row object at 0x000001477779B4F0>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779B430>, <sqlite3.Row object at 0x000001477779B3D0>, <sqlite3.Row object at 0x000001477779B310>]
2025-05-21 16:23:14,296 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,297 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,297 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,297 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,298 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,299 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,299 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,300 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,301 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,301 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,301 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,302 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,302 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,302 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,302 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,303 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x000001477779B250>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B2B0>]
2025-05-21 16:23:14,303 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,303 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,303 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,304 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,304 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x000001477779AD40>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779AC80>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779AB00>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x000001477779AA70>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A9E0>, <sqlite3.Row object at 0x000001477779A9B0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779A8C0>, <sqlite3.Row object at 0x000001477779A890>]
2025-05-21 16:23:14,306 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x000001477779AD40>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779AC80>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779AB00>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x000001477779AA70>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A9E0>, <sqlite3.Row object at 0x000001477779A9B0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779A8C0>, <sqlite3.Row object at 0x000001477779A890>]
2025-05-21 16:23:14,306 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,306 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,306 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,307 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,307 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,307 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,307 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,307 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,309 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,309 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,309 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,309 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,311 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,328 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,330 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779A5C0>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A410>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A380>, <sqlite3.Row object at 0x000001477779A350>]
2025-05-21 16:23:14,330 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,330 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,331 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,331 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,331 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,332 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,332 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,332 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,332 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,334 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,334 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,335 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,335 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,336 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,336 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,336 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779A5C0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x000001477779A320>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A2C0>]
2025-05-21 16:23:14,337 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,337 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,337 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,338 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,338 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x000001477779AD40>, <sqlite3.Row object at 0x000001477779AD10>]
2025-05-21 16:23:14,339 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x000001477779AD40>, <sqlite3.Row object at 0x000001477779AD10>]
2025-05-21 16:23:14,339 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,339 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,340 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,340 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,340 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,341 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,341 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,341 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,342 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,342 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,342 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,343 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,344 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,362 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,363 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x0000014777799600>, <sqlite3.Row object at 0x00000147777995D0>, <sqlite3.Row object at 0x00000147777995A0>, <sqlite3.Row object at 0x0000014777799570>, <sqlite3.Row object at 0x0000014777799540>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777799480>]
2025-05-21 16:23:14,364 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,364 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,364 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,365 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,365 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,366 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,366 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,366 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,366 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,367 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,368 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,368 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,368 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,369 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,369 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,369 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x0000014777799480>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x00000147777993F0>]
2025-05-21 16:23:14,369 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,370 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,370 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,371 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,371 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777798D90>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798CA0>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x0000014777798C10>, <sqlite3.Row object at 0x0000014777798BE0>, <sqlite3.Row object at 0x0000014777798BB0>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x0000014777798B50>, <sqlite3.Row object at 0x0000014777798B20>, <sqlite3.Row object at 0x0000014777798AF0>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798A30>, <sqlite3.Row object at 0x0000014777798A00>]
2025-05-21 16:23:14,372 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777798D90>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798CA0>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x0000014777798C10>, <sqlite3.Row object at 0x0000014777798BE0>, <sqlite3.Row object at 0x0000014777798BB0>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x0000014777798B50>, <sqlite3.Row object at 0x0000014777798B20>, <sqlite3.Row object at 0x0000014777798AF0>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798A30>, <sqlite3.Row object at 0x0000014777798A00>]
2025-05-21 16:23:14,372 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,373 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,373 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,373 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,373 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,374 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,374 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,374 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,375 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,375 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,377 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,377 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,378 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,400 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,401 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x0000014777798430>, <sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x00000147777983A0>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x0000014777798310>, <sqlite3.Row object at 0x00000147777982E0>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x0000014777798250>]
2025-05-21 16:23:14,401 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,401 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,402 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,402 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,402 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,402 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,402 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,404 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,404 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,404 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,405 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,405 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,405 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,406 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,406 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,406 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x00000147777981C0>]
2025-05-21 16:23:14,407 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,407 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,407 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,409 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,409 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777798D90>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798CA0>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x0000014777798C10>, <sqlite3.Row object at 0x0000014777798BE0>, <sqlite3.Row object at 0x0000014777798BB0>, <sqlite3.Row object at 0x0000014777798B80>]
2025-05-21 16:23:14,410 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777798D90>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798CA0>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x0000014777798C10>, <sqlite3.Row object at 0x0000014777798BE0>, <sqlite3.Row object at 0x0000014777798BB0>, <sqlite3.Row object at 0x0000014777798B80>]
2025-05-21 16:23:14,410 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,412 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,412 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,412 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,412 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,417 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,436 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,438 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x000001477779B430>, <sqlite3.Row object at 0x000001477779B670>, <sqlite3.Row object at 0x000001477779B5B0>, <sqlite3.Row object at 0x000001477779B4F0>, <sqlite3.Row object at 0x000001477779B640>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x000001477779B6A0>, <sqlite3.Row object at 0x000001477779BF40>, <sqlite3.Row object at 0x000001477779B580>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x000001477779B5E0>]
2025-05-21 16:23:14,438 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,439 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,439 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,439 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,440 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,440 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,440 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,441 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,441 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,442 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,442 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,443 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,443 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,444 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,444 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,444 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x000001477779B5E0>, <sqlite3.Row object at 0x000001477779B6D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B760>]
2025-05-21 16:23:14,444 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,444 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,444 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,444 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,444 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x000001477779ADD0>]
2025-05-21 16:23:14,444 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x000001477779ADD0>]
2025-05-21 16:23:14,444 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,444 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,444 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,448 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,448 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,448 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,448 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,448 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,448 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,448 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,450 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,450 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,452 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,471 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,473 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x000001477779A620>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x0000014777799E10>]
2025-05-21 16:23:14,473 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,473 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,473 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,474 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,474 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,474 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,475 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,475 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,476 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,476 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,476 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,477 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,477 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A770>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799A20>]
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,477 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,477 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>]
2025-05-21 16:23:14,477 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779B0A0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779B040>]
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,477 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,477 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,477 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,477 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,484 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,484 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,484 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,485 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,485 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,485 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,505 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,506 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x0000014777799780>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x0000014777799840>, <sqlite3.Row object at 0x0000014777799870>, <sqlite3.Row object at 0x0000014777799A50>, <sqlite3.Row object at 0x0000014777799D20>, <sqlite3.Row object at 0x000001477779B8B0>, <sqlite3.Row object at 0x000001477779BAC0>]
2025-05-21 16:23:14,506 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,507 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,507 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,507 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,508 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,508 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,508 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,509 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,509 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,510 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,510 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,510 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,510 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,510 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,512 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779BAC0>, <sqlite3.Row object at 0x0000014777799BA0>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BD00>]
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,512 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,512 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798DC0>]
2025-05-21 16:23:14,512 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798DC0>]
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,512 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,512 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,512 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,512 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,517 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,517 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,517 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,517 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,520 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,538 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,540 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x0000014777798430>, <sqlite3.Row object at 0x0000014777798460>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x0000014777798490>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x0000014777798520>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x0000014777798550>]
2025-05-21 16:23:14,540 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,540 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,541 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,541 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,541 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,542 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,542 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,542 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,543 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,543 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,543 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,543 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,543 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,544 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,544 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,545 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798550>, <sqlite3.Row object at 0x00000147777985B0>, <sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x0000014777798640>]
2025-05-21 16:23:14,545 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,546 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,546 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,546 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,547 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798790>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x00000147777987F0>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x00000147777988E0>, <sqlite3.Row object at 0x0000014777798910>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>]
2025-05-21 16:23:14,547 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798790>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x00000147777987F0>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x00000147777988E0>, <sqlite3.Row object at 0x0000014777798910>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>]
2025-05-21 16:23:14,547 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,549 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,549 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,549 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,549 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,549 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,549 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,550 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,550 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,550 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,550 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,551 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,552 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:14,568 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:14,570 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779B5B0>, <sqlite3.Row object at 0x000001477779B3D0>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x000001477779B310>, <sqlite3.Row object at 0x0000014777799DE0>, <sqlite3.Row object at 0x000001477779B2B0>, <sqlite3.Row object at 0x000001477779B250>, <sqlite3.Row object at 0x000001477779A800>, <sqlite3.Row object at 0x000001477779A830>, <sqlite3.Row object at 0x000001477779B370>, <sqlite3.Row object at 0x0000014777799DB0>]
2025-05-21 16:23:14,570 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:14,571 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:14,571 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:14,571 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:14,571 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:14,571 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:14,571 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:14,571 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:14,571 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:14,571 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:14,573 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:14,573 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:14,573 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:14,574 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:14,574 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:14,574 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779B5B0>, <sqlite3.Row object at 0x0000014777799DB0>, <sqlite3.Row object at 0x0000014777799D80>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779B700>]
2025-05-21 16:23:14,574 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:14,575 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:14,575 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:14,575 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:14,576 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>]
2025-05-21 16:23:14,576 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>]
2025-05-21 16:23:14,576 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:14,578 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:14,578 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:14,578 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:14,578 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:14,578 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,648 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,649 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A5F0>]
2025-05-21 16:23:15,650 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,651 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,651 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,651 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,652 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,652 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,652 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,653 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,653 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,654 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,654 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,654 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,655 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,655 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,656 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,656 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x000001477779A620>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A380>]
2025-05-21 16:23:15,656 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,657 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,657 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,657 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,657 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x000001477779A410>, <sqlite3.Row object at 0x000001477779B910>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x000001477779AC80>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779A290>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>]
2025-05-21 16:23:15,659 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x000001477779A410>, <sqlite3.Row object at 0x000001477779B910>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x000001477779AC80>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779A290>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>]
2025-05-21 16:23:15,659 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,659 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,659 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,660 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,660 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,661 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,661 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,661 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,661 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,661 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,661 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,661 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,661 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,680 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,685 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x000001477779BD00>, <sqlite3.Row object at 0x0000014777799BA0>, <sqlite3.Row object at 0x000001477779BAC0>, <sqlite3.Row object at 0x000001477779B8B0>, <sqlite3.Row object at 0x0000014777799D20>, <sqlite3.Row object at 0x0000014777799A50>, <sqlite3.Row object at 0x0000014777799870>, <sqlite3.Row object at 0x0000014777799840>, <sqlite3.Row object at 0x00000147777997E0>]
2025-05-21 16:23:15,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,685 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,685 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,685 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,685 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,685 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,690 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,690 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,690 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,690 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,690 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,692 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x0000014777799780>, <sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x0000014777799720>]
2025-05-21 16:23:15,692 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,693 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,694 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,694 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,694 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x0000014777799810>, <sqlite3.Row object at 0x0000014777799480>, <sqlite3.Row object at 0x000001477779AB00>, <sqlite3.Row object at 0x00000147777996C0>, <sqlite3.Row object at 0x00000147777995D0>, <sqlite3.Row object at 0x0000014777799690>, <sqlite3.Row object at 0x000001477779B970>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777799600>, <sqlite3.Row object at 0x00000147777995A0>, <sqlite3.Row object at 0x0000014777799570>, <sqlite3.Row object at 0x000001477779A9B0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798A00>, <sqlite3.Row object at 0x0000014777799540>, <sqlite3.Row object at 0x0000014777798A30>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x0000014777798B50>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798790>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x00000147777987F0>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x00000147777988E0>, <sqlite3.Row object at 0x0000014777798910>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>]
2025-05-21 16:23:15,695 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x0000014777799810>, <sqlite3.Row object at 0x0000014777799480>, <sqlite3.Row object at 0x000001477779AB00>, <sqlite3.Row object at 0x00000147777996C0>, <sqlite3.Row object at 0x00000147777995D0>, <sqlite3.Row object at 0x0000014777799690>, <sqlite3.Row object at 0x000001477779B970>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777799600>, <sqlite3.Row object at 0x00000147777995A0>, <sqlite3.Row object at 0x0000014777799570>, <sqlite3.Row object at 0x000001477779A9B0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798A00>, <sqlite3.Row object at 0x0000014777799540>, <sqlite3.Row object at 0x0000014777798A30>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x0000014777798B50>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798790>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x00000147777987F0>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x00000147777988E0>, <sqlite3.Row object at 0x0000014777798910>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>]
2025-05-21 16:23:15,695 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,695 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,695 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,695 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,695 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,695 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,698 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,698 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,698 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,698 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,698 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,698 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,701 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,720 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,722 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E770>, <sqlite3.Row object at 0x000001477777E7A0>, <sqlite3.Row object at 0x000001477777E7D0>, <sqlite3.Row object at 0x000001477777E800>, <sqlite3.Row object at 0x000001477777E830>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777FFA0>, <sqlite3.Row object at 0x000001477777FF40>, <sqlite3.Row object at 0x000001477777FEE0>, <sqlite3.Row object at 0x000001477777FE80>]
2025-05-21 16:23:15,726 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,727 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,727 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,727 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,727 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,727 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,727 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,729 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779BB20>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x0000014777799240>]
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,730 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,730 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,730 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x000001477779B850>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777798970>, <sqlite3.Row object at 0x00000147777986D0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798640>, <sqlite3.Row object at 0x00000147777985B0>, <sqlite3.Row object at 0x0000014777798550>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x0000014777798520>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x0000014777798490>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798460>, <sqlite3.Row object at 0x0000014777798430>, <sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x000001477779BB50>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798310>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x00000147777982E0>, <sqlite3.Row object at 0x0000014777798B20>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798CA0>, <sqlite3.Row object at 0x0000014777798BE0>, <sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x0000014777799810>, <sqlite3.Row object at 0x0000014777799480>, <sqlite3.Row object at 0x000001477779AB00>, <sqlite3.Row object at 0x00000147777996C0>, <sqlite3.Row object at 0x00000147777995D0>, <sqlite3.Row object at 0x0000014777799690>, <sqlite3.Row object at 0x000001477779B970>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777799600>]
2025-05-21 16:23:15,735 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x00000147777991E0>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799180>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799120>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x000001477779B850>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777798970>, <sqlite3.Row object at 0x00000147777986D0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x0000014777798FA0>, <sqlite3.Row object at 0x0000014777798640>, <sqlite3.Row object at 0x00000147777985B0>, <sqlite3.Row object at 0x0000014777798550>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x0000014777798520>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x0000014777798490>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798460>, <sqlite3.Row object at 0x0000014777798430>, <sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x000001477779BB50>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798310>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x00000147777982E0>, <sqlite3.Row object at 0x0000014777798B20>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798CA0>, <sqlite3.Row object at 0x0000014777798BE0>, <sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x0000014777799810>, <sqlite3.Row object at 0x0000014777799480>, <sqlite3.Row object at 0x000001477779AB00>, <sqlite3.Row object at 0x00000147777996C0>, <sqlite3.Row object at 0x00000147777995D0>, <sqlite3.Row object at 0x0000014777799690>, <sqlite3.Row object at 0x000001477779B970>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777799600>]
2025-05-21 16:23:15,735 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,735 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,735 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,735 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,735 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,735 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,760 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,762 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A080>]
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,762 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,762 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,767 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,767 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A050>, <sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799FF0>]
2025-05-21 16:23:15,767 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,767 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,767 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,767 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,770 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779A8C0>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B700>, <sqlite3.Row object at 0x0000014777799D80>, <sqlite3.Row object at 0x0000014777799DB0>, <sqlite3.Row object at 0x000001477779B370>, <sqlite3.Row object at 0x000001477779A830>, <sqlite3.Row object at 0x000001477779A800>, <sqlite3.Row object at 0x000001477779B250>, <sqlite3.Row object at 0x000001477779B2B0>, <sqlite3.Row object at 0x0000014777799DE0>, <sqlite3.Row object at 0x000001477779B310>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779B3D0>, <sqlite3.Row object at 0x000001477779B430>, <sqlite3.Row object at 0x000001477779AD40>, <sqlite3.Row object at 0x00000147777999C0>, <sqlite3.Row object at 0x000001477779B670>, <sqlite3.Row object at 0x000001477779B580>, <sqlite3.Row object at 0x000001477779B640>, <sqlite3.Row object at 0x000001477779B4F0>, <sqlite3.Row object at 0x000001477779B6A0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x000001477779BF40>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x000001477779B5E0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A3B0>]
2025-05-21 16:23:15,770 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A020>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F30>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x0000014777799EA0>, <sqlite3.Row object at 0x0000014777799E70>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B280>, <sqlite3.Row object at 0x000001477779B220>, <sqlite3.Row object at 0x000001477779B1F0>, <sqlite3.Row object at 0x000001477779A8C0>, <sqlite3.Row object at 0x000001477779B160>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779B700>, <sqlite3.Row object at 0x0000014777799D80>, <sqlite3.Row object at 0x0000014777799DB0>, <sqlite3.Row object at 0x000001477779B370>, <sqlite3.Row object at 0x000001477779A830>, <sqlite3.Row object at 0x000001477779A800>, <sqlite3.Row object at 0x000001477779B250>, <sqlite3.Row object at 0x000001477779B2B0>, <sqlite3.Row object at 0x0000014777799DE0>, <sqlite3.Row object at 0x000001477779B310>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779B3D0>, <sqlite3.Row object at 0x000001477779B430>, <sqlite3.Row object at 0x000001477779AD40>, <sqlite3.Row object at 0x00000147777999C0>, <sqlite3.Row object at 0x000001477779B670>, <sqlite3.Row object at 0x000001477779B580>, <sqlite3.Row object at 0x000001477779B640>, <sqlite3.Row object at 0x000001477779B4F0>, <sqlite3.Row object at 0x000001477779B6A0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x000001477779BF40>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x000001477779B5E0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A3B0>]
2025-05-21 16:23:15,771 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,771 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,771 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,771 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,771 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,771 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,773 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,773 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,773 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,773 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,773 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,773 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,777 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,794 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,794 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777C0A0>]
2025-05-21 16:23:15,794 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,794 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,794 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,798 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,798 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,798 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,798 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,798 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,798 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,800 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,800 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,800 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777E200>]
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,800 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,800 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,805 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477779B5B0>, <sqlite3.Row object at 0x0000014777799900>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779A410>, <sqlite3.Row object at 0x000001477779B910>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x000001477779AC80>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779A290>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>]
2025-05-21 16:23:15,805 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477779B5B0>, <sqlite3.Row object at 0x0000014777799900>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779A410>, <sqlite3.Row object at 0x000001477779B910>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x000001477779AC80>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x000001477779A290>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x000001477779ABF0>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777799B70>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x00000147777998A0>, <sqlite3.Row object at 0x0000014777799990>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x00000147777998D0>]
2025-05-21 16:23:15,806 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,806 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,806 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,806 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,806 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,806 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,806 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,806 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,809 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,809 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,810 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,810 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,812 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,827 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,827 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x000001477779A5C0>, <sqlite3.Row object at 0x0000014777798EE0>]
2025-05-21 16:23:15,827 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,827 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,827 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,827 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,827 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,827 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,827 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,827 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,827 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,827 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,835 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,835 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,836 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,836 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777989D0>, <sqlite3.Row object at 0x0000014777798DC0>]
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,836 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,836 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x00000147777989D0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798850>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x000001477779BB20>, <sqlite3.Row object at 0x000001477779B8B0>, <sqlite3.Row object at 0x00000147777995A0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798A00>, <sqlite3.Row object at 0x0000014777799540>, <sqlite3.Row object at 0x0000014777798A30>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x0000014777798B50>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798790>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x00000147777987F0>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x00000147777988E0>, <sqlite3.Row object at 0x0000014777798910>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>]
2025-05-21 16:23:15,836 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x00000147777989D0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x000001477779B130>, <sqlite3.Row object at 0x0000014777798D60>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798850>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x000001477779BB20>, <sqlite3.Row object at 0x000001477779B8B0>, <sqlite3.Row object at 0x00000147777995A0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798A00>, <sqlite3.Row object at 0x0000014777799540>, <sqlite3.Row object at 0x0000014777798A30>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x0000014777798B50>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798790>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x00000147777987F0>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x00000147777988E0>, <sqlite3.Row object at 0x0000014777798910>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779BF10>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779BE50>, <sqlite3.Row object at 0x000001477779BB80>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>]
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,836 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,836 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,836 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,836 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,842 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,842 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,842 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,843 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,843 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,844 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,861 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,861 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777C6D0>, <sqlite3.Row object at 0x000001477777FDC0>, <sqlite3.Row object at 0x000001477777FD90>, <sqlite3.Row object at 0x000001477777FD60>, <sqlite3.Row object at 0x000001477777FD30>, <sqlite3.Row object at 0x000001477777FD00>, <sqlite3.Row object at 0x000001477777FCD0>, <sqlite3.Row object at 0x000001477777FCA0>, <sqlite3.Row object at 0x000001477777FC70>, <sqlite3.Row object at 0x000001477777FC40>, <sqlite3.Row object at 0x000001477777FC10>, <sqlite3.Row object at 0x000001477777FBE0>]
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,861 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,861 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,861 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,861 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,861 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,861 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,867 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,867 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,867 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,867 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777C6D0>, <sqlite3.Row object at 0x000001477777FBE0>, <sqlite3.Row object at 0x000001477777FBB0>, <sqlite3.Row object at 0x000001477777FB80>, <sqlite3.Row object at 0x000001477777FB50>]
2025-05-21 16:23:15,867 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,867 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,867 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,867 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,871 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777FB80>, <sqlite3.Row object at 0x000001477777FAF0>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA90>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FA30>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F9D0>, <sqlite3.Row object at 0x000001477777F9A0>, <sqlite3.Row object at 0x000001477777F970>, <sqlite3.Row object at 0x000001477777F940>, <sqlite3.Row object at 0x000001477777F910>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F8B0>, <sqlite3.Row object at 0x000001477777F880>, <sqlite3.Row object at 0x000001477777F850>, <sqlite3.Row object at 0x000001477777F820>, <sqlite3.Row object at 0x000001477777F7F0>, <sqlite3.Row object at 0x000001477777F7C0>, <sqlite3.Row object at 0x000001477777F790>, <sqlite3.Row object at 0x000001477777F760>, <sqlite3.Row object at 0x000001477777F730>, <sqlite3.Row object at 0x000001477777F700>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F6A0>, <sqlite3.Row object at 0x000001477777F670>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x0000014777798310>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x0000014777799780>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x0000014777799840>]
2025-05-21 16:23:15,871 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777FB80>, <sqlite3.Row object at 0x000001477777FAF0>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA90>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FA30>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F9D0>, <sqlite3.Row object at 0x000001477777F9A0>, <sqlite3.Row object at 0x000001477777F970>, <sqlite3.Row object at 0x000001477777F940>, <sqlite3.Row object at 0x000001477777F910>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F8B0>, <sqlite3.Row object at 0x000001477777F880>, <sqlite3.Row object at 0x000001477777F850>, <sqlite3.Row object at 0x000001477777F820>, <sqlite3.Row object at 0x000001477777F7F0>, <sqlite3.Row object at 0x000001477777F7C0>, <sqlite3.Row object at 0x000001477777F790>, <sqlite3.Row object at 0x000001477777F760>, <sqlite3.Row object at 0x000001477777F730>, <sqlite3.Row object at 0x000001477777F700>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F6A0>, <sqlite3.Row object at 0x000001477777F670>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x0000014777799660>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x000001477779AD70>, <sqlite3.Row object at 0x00000147777997B0>, <sqlite3.Row object at 0x000001477779AF50>, <sqlite3.Row object at 0x0000014777798310>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x000001477779BCD0>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x0000014777798130>, <sqlite3.Row object at 0x0000014777798100>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x0000014777798070>, <sqlite3.Row object at 0x00000147777980A0>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x0000014777799780>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x0000014777799840>]
2025-05-21 16:23:15,871 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,871 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,873 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,873 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,873 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,873 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,878 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,894 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,894 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779A5C0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x00000147777989A0>]
2025-05-21 16:23:15,894 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,894 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,899 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,899 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,899 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,899 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,899 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,899 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779A5C0>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x0000014777799BD0>, <sqlite3.Row object at 0x000001477779AF20>]
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,900 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,900 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777799BD0>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779BF70>, <sqlite3.Row object at 0x000001477779B6D0>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A320>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A380>, <sqlite3.Row object at 0x000001477779A620>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>]
2025-05-21 16:23:15,904 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777799BD0>, <sqlite3.Row object at 0x0000014777798F10>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779BF70>, <sqlite3.Row object at 0x000001477779B6D0>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A320>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A380>, <sqlite3.Row object at 0x000001477779A620>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>]
2025-05-21 16:23:15,904 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,905 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,905 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,906 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,906 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,907 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,907 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,907 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,907 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,907 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,907 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,907 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,910 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,928 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,928 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779BAC0>, <sqlite3.Row object at 0x0000014777799570>, <sqlite3.Row object at 0x0000014777799240>, <sqlite3.Row object at 0x00000147777992A0>, <sqlite3.Row object at 0x00000147777992D0>, <sqlite3.Row object at 0x0000014777799300>, <sqlite3.Row object at 0x0000014777799330>, <sqlite3.Row object at 0x0000014777799360>, <sqlite3.Row object at 0x0000014777799390>, <sqlite3.Row object at 0x0000014777799420>, <sqlite3.Row object at 0x0000014777798040>, <sqlite3.Row object at 0x00000147777980D0>]
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,928 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,928 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779BAC0>, <sqlite3.Row object at 0x00000147777980D0>, <sqlite3.Row object at 0x0000014777798BB0>, <sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x0000014777798C10>]
2025-05-21 16:23:15,928 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,935 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,935 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,935 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,936 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x000001477779AA70>, <sqlite3.Row object at 0x000001477779BA00>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x0000014777799D50>, <sqlite3.Row object at 0x000001477777FE20>, <sqlite3.Row object at 0x000001477777C640>, <sqlite3.Row object at 0x000001477777C7F0>, <sqlite3.Row object at 0x000001477777C850>, <sqlite3.Row object at 0x000001477777E380>, <sqlite3.Row object at 0x000001477777C820>, <sqlite3.Row object at 0x000001477777E230>, <sqlite3.Row object at 0x000001477777E2C0>, <sqlite3.Row object at 0x000001477777E7D0>, <sqlite3.Row object at 0x000001477777E770>, <sqlite3.Row object at 0x000001477777C6A0>, <sqlite3.Row object at 0x000001477777E6E0>, <sqlite3.Row object at 0x000001477777E830>, <sqlite3.Row object at 0x000001477777E800>, <sqlite3.Row object at 0x000001477777FFA0>, <sqlite3.Row object at 0x000001477777E650>, <sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E590>, <sqlite3.Row object at 0x000001477777E7A0>, <sqlite3.Row object at 0x000001477777E620>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x0000014777799210>]
2025-05-21 16:23:15,936 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x00000147777996F0>, <sqlite3.Row object at 0x000001477779AA70>, <sqlite3.Row object at 0x000001477779BA00>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x0000014777799D50>, <sqlite3.Row object at 0x000001477777FE20>, <sqlite3.Row object at 0x000001477777C640>, <sqlite3.Row object at 0x000001477777C7F0>, <sqlite3.Row object at 0x000001477777C850>, <sqlite3.Row object at 0x000001477777E380>, <sqlite3.Row object at 0x000001477777C820>, <sqlite3.Row object at 0x000001477777E230>, <sqlite3.Row object at 0x000001477777E2C0>, <sqlite3.Row object at 0x000001477777E7D0>, <sqlite3.Row object at 0x000001477777E770>, <sqlite3.Row object at 0x000001477777C6A0>, <sqlite3.Row object at 0x000001477777E6E0>, <sqlite3.Row object at 0x000001477777E830>, <sqlite3.Row object at 0x000001477777E800>, <sqlite3.Row object at 0x000001477777FFA0>, <sqlite3.Row object at 0x000001477777E650>, <sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E590>, <sqlite3.Row object at 0x000001477777E7A0>, <sqlite3.Row object at 0x000001477777E620>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x0000014777799210>]
2025-05-21 16:23:15,936 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,936 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,936 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,941 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,942 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,944 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:15,962 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:15,964 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A860>]
2025-05-21 16:23:15,964 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:15,965 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:15,965 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:15,966 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:15,966 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:15,966 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:15,966 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:15,967 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:15,967 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:15,967 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:15,968 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:15,968 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:15,968 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:15,968 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:15,968 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:15,970 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779B550>]
2025-05-21 16:23:15,970 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:15,970 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:15,971 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:15,971 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:15,972 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779BF70>, <sqlite3.Row object at 0x000001477779B6D0>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A320>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A380>, <sqlite3.Row object at 0x000001477779A620>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x00000147777982E0>]
2025-05-21 16:23:15,972 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A4A0>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x000001477779A2F0>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x000001477779BF70>, <sqlite3.Row object at 0x000001477779B6D0>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A320>, <sqlite3.Row object at 0x000001477779A1D0>, <sqlite3.Row object at 0x000001477779A200>, <sqlite3.Row object at 0x000001477779A380>, <sqlite3.Row object at 0x000001477779A620>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x00000147777982E0>]
2025-05-21 16:23:15,973 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:15,974 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:15,974 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,975 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:15,975 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:15,975 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:15,976 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:15,976 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:15,976 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:15,977 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:15,978 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:15,978 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:15,980 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,050 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,050 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F910>, <sqlite3.Row object at 0x000001477777F940>, <sqlite3.Row object at 0x000001477777F8B0>, <sqlite3.Row object at 0x000001477777F880>, <sqlite3.Row object at 0x000001477777F850>, <sqlite3.Row object at 0x000001477777F820>, <sqlite3.Row object at 0x000001477777F7F0>, <sqlite3.Row object at 0x000001477777F7C0>, <sqlite3.Row object at 0x000001477777F790>, <sqlite3.Row object at 0x000001477777F760>, <sqlite3.Row object at 0x000001477777F730>]
2025-05-21 16:23:21,050 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,054 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,054 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,054 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,054 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,056 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,056 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,056 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,056 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,056 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,056 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,056 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,056 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,059 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,059 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,059 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F730>, <sqlite3.Row object at 0x000001477777F700>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F6A0>]
2025-05-21 16:23:21,060 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,061 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,062 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,062 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,066 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C370>, <sqlite3.Row object at 0x000001477777E2F0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777F490>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777F430>, <sqlite3.Row object at 0x000001477777F400>, <sqlite3.Row object at 0x000001477777F3D0>, <sqlite3.Row object at 0x000001477777F3A0>, <sqlite3.Row object at 0x000001477777F370>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F310>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777F280>, <sqlite3.Row object at 0x000001477777F250>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x00000147777990C0>]
2025-05-21 16:23:21,067 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C370>, <sqlite3.Row object at 0x000001477777E2F0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777F490>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777F430>, <sqlite3.Row object at 0x000001477777F400>, <sqlite3.Row object at 0x000001477777F3D0>, <sqlite3.Row object at 0x000001477777F3A0>, <sqlite3.Row object at 0x000001477777F370>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F310>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777F280>, <sqlite3.Row object at 0x000001477777F250>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x00000147777990C0>]
2025-05-21 16:23:21,067 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,067 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,067 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,069 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,069 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,070 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,070 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,070 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,071 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,071 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,071 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,071 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,073 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,099 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,102 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x00000147777993F0>]
2025-05-21 16:23:21,102 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,102 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,102 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,102 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,102 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,102 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,102 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,105 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,105 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,105 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,106 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,106 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,106 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,107 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,107 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,107 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779A530>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x0000014777798EE0>]
2025-05-21 16:23:21,107 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,107 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,109 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,109 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,110 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x00000147777982E0>, <sqlite3.Row object at 0x0000014777799870>, <sqlite3.Row object at 0x0000014777799840>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>]
2025-05-21 16:23:21,111 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x00000147777982E0>, <sqlite3.Row object at 0x0000014777799870>, <sqlite3.Row object at 0x0000014777799840>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779A080>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>]
2025-05-21 16:23:21,111 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,113 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,113 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,114 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,114 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,114 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,116 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,116 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,116 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,116 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,117 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,117 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,120 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,147 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,149 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777C640>, <sqlite3.Row object at 0x000001477777E380>, <sqlite3.Row object at 0x000001477777C820>, <sqlite3.Row object at 0x000001477777E230>, <sqlite3.Row object at 0x000001477777E2C0>, <sqlite3.Row object at 0x000001477777E7D0>, <sqlite3.Row object at 0x000001477777E770>, <sqlite3.Row object at 0x000001477777C6A0>, <sqlite3.Row object at 0x000001477777E6E0>, <sqlite3.Row object at 0x000001477777E830>, <sqlite3.Row object at 0x000001477777E800>, <sqlite3.Row object at 0x000001477777FFA0>]
2025-05-21 16:23:21,149 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,150 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,150 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,150 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,152 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,153 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,153 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,153 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,154 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,155 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,155 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,155 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,156 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,156 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,156 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,156 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777C640>, <sqlite3.Row object at 0x000001477777FFA0>, <sqlite3.Row object at 0x000001477777E650>, <sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E590>]
2025-05-21 16:23:21,158 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,159 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,159 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,161 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,161 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E620>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EEF0>, <sqlite3.Row object at 0x000001477777EEC0>, <sqlite3.Row object at 0x000001477777EE90>, <sqlite3.Row object at 0x000001477777EE60>, <sqlite3.Row object at 0x000001477777EE30>, <sqlite3.Row object at 0x000001477777EE00>, <sqlite3.Row object at 0x000001477777EDD0>]
2025-05-21 16:23:21,162 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E620>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EEF0>, <sqlite3.Row object at 0x000001477777EEC0>, <sqlite3.Row object at 0x000001477777EE90>, <sqlite3.Row object at 0x000001477777EE60>, <sqlite3.Row object at 0x000001477777EE30>, <sqlite3.Row object at 0x000001477777EE00>, <sqlite3.Row object at 0x000001477777EDD0>]
2025-05-21 16:23:21,162 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,162 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,164 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,164 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,164 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,166 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,167 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,167 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,167 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,169 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,169 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,169 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,171 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,207 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,209 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779A7A0>, <sqlite3.Row object at 0x0000014777799FC0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x0000014777799C30>, <sqlite3.Row object at 0x000001477779A6E0>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x000001477779AE30>, <sqlite3.Row object at 0x0000014777799630>]
2025-05-21 16:23:21,209 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,211 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,211 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,213 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,214 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,219 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,220 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,222 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,222 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,222 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,223 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,223 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,224 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,224 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,224 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,225 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779A140>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779A440>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A0E0>]
2025-05-21 16:23:21,226 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,226 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,229 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,231 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,231 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A890>]
2025-05-21 16:23:21,231 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A890>]
2025-05-21 16:23:21,233 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,233 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,233 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,233 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,233 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,235 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,235 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,235 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,235 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,235 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,237 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,237 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,239 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,261 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,261 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x0000014777799780>, <sqlite3.Row object at 0x0000014777798640>, <sqlite3.Row object at 0x0000014777799150>, <sqlite3.Row object at 0x0000014777799600>, <sqlite3.Row object at 0x0000014777798D00>, <sqlite3.Row object at 0x000001477777C7F0>, <sqlite3.Row object at 0x000001477777FA30>, <sqlite3.Row object at 0x000001477777C6D0>, <sqlite3.Row object at 0x000001477777FE20>, <sqlite3.Row object at 0x000001477777FB80>, <sqlite3.Row object at 0x000001477777FAF0>]
2025-05-21 16:23:21,267 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,267 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,267 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,267 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,267 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,267 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,267 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,270 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,270 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,270 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,271 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,271 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,271 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,271 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,271 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,271 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777798880>, <sqlite3.Row object at 0x000001477777FAF0>, <sqlite3.Row object at 0x000001477777FA90>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777F9D0>]
2025-05-21 16:23:21,273 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,273 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,273 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,273 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,273 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C370>, <sqlite3.Row object at 0x000001477777E2F0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777F490>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777F430>, <sqlite3.Row object at 0x000001477777F400>, <sqlite3.Row object at 0x000001477777F3D0>, <sqlite3.Row object at 0x000001477777F3A0>, <sqlite3.Row object at 0x000001477777F370>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F310>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777F280>, <sqlite3.Row object at 0x000001477777F250>, <sqlite3.Row object at 0x000001477777EB90>, <sqlite3.Row object at 0x000001477777EB60>, <sqlite3.Row object at 0x000001477777EB30>, <sqlite3.Row object at 0x000001477777EB00>, <sqlite3.Row object at 0x000001477777EAD0>, <sqlite3.Row object at 0x000001477777EAA0>, <sqlite3.Row object at 0x000001477777EA70>, <sqlite3.Row object at 0x000001477777EA40>, <sqlite3.Row object at 0x000001477777EA10>, <sqlite3.Row object at 0x000001477777E9E0>, <sqlite3.Row object at 0x000001477777E9B0>, <sqlite3.Row object at 0x000001477777E980>, <sqlite3.Row object at 0x000001477777E950>, <sqlite3.Row object at 0x000001477777E920>, <sqlite3.Row object at 0x000001477777E8F0>]
2025-05-21 16:23:21,273 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C370>, <sqlite3.Row object at 0x000001477777E2F0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777F490>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777F430>, <sqlite3.Row object at 0x000001477777F400>, <sqlite3.Row object at 0x000001477777F3D0>, <sqlite3.Row object at 0x000001477777F3A0>, <sqlite3.Row object at 0x000001477777F370>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F310>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777F280>, <sqlite3.Row object at 0x000001477777F250>, <sqlite3.Row object at 0x000001477777EB90>, <sqlite3.Row object at 0x000001477777EB60>, <sqlite3.Row object at 0x000001477777EB30>, <sqlite3.Row object at 0x000001477777EB00>, <sqlite3.Row object at 0x000001477777EAD0>, <sqlite3.Row object at 0x000001477777EAA0>, <sqlite3.Row object at 0x000001477777EA70>, <sqlite3.Row object at 0x000001477777EA40>, <sqlite3.Row object at 0x000001477777EA10>, <sqlite3.Row object at 0x000001477777E9E0>, <sqlite3.Row object at 0x000001477777E9B0>, <sqlite3.Row object at 0x000001477777E980>, <sqlite3.Row object at 0x000001477777E950>, <sqlite3.Row object at 0x000001477777E920>, <sqlite3.Row object at 0x000001477777E8F0>]
2025-05-21 16:23:21,276 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,276 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,277 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,277 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,278 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,278 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,280 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,280 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,280 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,280 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,280 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,280 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,280 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,306 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,307 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x00000147777990C0>]
2025-05-21 16:23:21,307 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,307 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,307 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,307 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,307 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,309 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,309 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,310 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,310 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777798E20>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A3B0>]
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,311 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,311 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x00000147777991B0>]
2025-05-21 16:23:21,311 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x0000014777798C70>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x000001477779AEC0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x00000147777991B0>]
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,311 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,311 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,317 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,317 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,317 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,317 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,317 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,319 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,319 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,320 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,320 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,321 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,343 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,344 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x0000014777799C00>, <sqlite3.Row object at 0x000001477779AB60>, <sqlite3.Row object at 0x000001477779B790>, <sqlite3.Row object at 0x000001477779AA10>, <sqlite3.Row object at 0x000001477779BF40>, <sqlite3.Row object at 0x0000014777799AB0>, <sqlite3.Row object at 0x0000014777799A80>, <sqlite3.Row object at 0x000001477779BAC0>, <sqlite3.Row object at 0x0000014777799D50>, <sqlite3.Row object at 0x000001477777C640>, <sqlite3.Row object at 0x000001477777EDA0>]
2025-05-21 16:23:21,344 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,344 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,344 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,344 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,344 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,344 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,344 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,348 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,348 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,348 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,348 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,348 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,350 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,350 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,350 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,350 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477777EDA0>, <sqlite3.Row object at 0x000001477777ED10>, <sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777ECB0>]
2025-05-21 16:23:21,350 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,352 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,352 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,352 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,352 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777EC50>, <sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777EBF0>, <sqlite3.Row object at 0x000001477777EBC0>, <sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E620>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EEF0>, <sqlite3.Row object at 0x000001477777EEC0>]
2025-05-21 16:23:21,352 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777EC50>, <sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777EBF0>, <sqlite3.Row object at 0x000001477777EBC0>, <sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E620>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>, <sqlite3.Row object at 0x000001477777C280>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EEF0>, <sqlite3.Row object at 0x000001477777EEC0>]
2025-05-21 16:23:21,352 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,355 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,355 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,355 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,356 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,357 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,357 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,357 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,357 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,358 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,358 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,358 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,361 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,380 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,385 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x0000014777799840>, <sqlite3.Row object at 0x000001477779BD30>, <sqlite3.Row object at 0x00000147777982E0>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x0000014777799870>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x0000014777799AE0>]
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,385 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,385 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,391 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,392 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x000001477779BBE0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x000001477779B0D0>]
2025-05-21 16:23:21,393 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,393 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,393 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,395 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,396 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x0000014777798C70>]
2025-05-21 16:23:21,396 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A3E0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779A8F0>, <sqlite3.Row object at 0x0000014777799510>, <sqlite3.Row object at 0x0000014777799CF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x00000147777999F0>, <sqlite3.Row object at 0x000001477779AE60>, <sqlite3.Row object at 0x0000014777798EE0>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779BD60>, <sqlite3.Row object at 0x000001477779ADD0>, <sqlite3.Row object at 0x000001477779AB90>, <sqlite3.Row object at 0x000001477779AAD0>, <sqlite3.Row object at 0x000001477779AF80>, <sqlite3.Row object at 0x0000014777798AC0>, <sqlite3.Row object at 0x000001477779BE80>, <sqlite3.Row object at 0x0000014777798250>, <sqlite3.Row object at 0x000001477779B010>, <sqlite3.Row object at 0x000001477779B730>, <sqlite3.Row object at 0x000001477779A650>, <sqlite3.Row object at 0x0000014777798C70>]
2025-05-21 16:23:21,397 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,397 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,397 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,398 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,398 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,398 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,399 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,399 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,400 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,400 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,401 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,401 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,404 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,490 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,494 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777798AF0>, <sqlite3.Row object at 0x0000014777798190>, <sqlite3.Row object at 0x000001477779BC10>, <sqlite3.Row object at 0x000001477779AAA0>, <sqlite3.Row object at 0x0000014777798610>, <sqlite3.Row object at 0x0000014777798A00>, <sqlite3.Row object at 0x00000147777986A0>, <sqlite3.Row object at 0x0000014777798970>, <sqlite3.Row object at 0x0000014777799540>, <sqlite3.Row object at 0x00000147777998D0>, <sqlite3.Row object at 0x00000147777988B0>, <sqlite3.Row object at 0x0000014777798F70>]
2025-05-21 16:23:21,497 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,500 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,501 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,505 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,507 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,508 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,508 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,509 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,509 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,509 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,510 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,511 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,512 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,514 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,515 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,517 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777798AF0>, <sqlite3.Row object at 0x0000014777798F70>, <sqlite3.Row object at 0x000001477777E8C0>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E110>]
2025-05-21 16:23:21,518 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,520 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,521 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,521 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,525 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>, <sqlite3.Row object at 0x000001477777E050>, <sqlite3.Row object at 0x000001477777E020>, <sqlite3.Row object at 0x000001477777DFF0>, <sqlite3.Row object at 0x000001477777DFC0>, <sqlite3.Row object at 0x000001477777DF90>, <sqlite3.Row object at 0x000001477777DF60>, <sqlite3.Row object at 0x000001477777DF30>, <sqlite3.Row object at 0x000001477777DF00>, <sqlite3.Row object at 0x000001477777DED0>, <sqlite3.Row object at 0x000001477777DEA0>, <sqlite3.Row object at 0x000001477777DE70>, <sqlite3.Row object at 0x000001477777DE40>, <sqlite3.Row object at 0x000001477777DE10>, <sqlite3.Row object at 0x000001477777DDE0>, <sqlite3.Row object at 0x000001477777DDB0>, <sqlite3.Row object at 0x000001477777DD80>, <sqlite3.Row object at 0x000001477777DD50>, <sqlite3.Row object at 0x000001477777DD20>, <sqlite3.Row object at 0x000001477777DCF0>, <sqlite3.Row object at 0x000001477777DCC0>, <sqlite3.Row object at 0x000001477777DC90>, <sqlite3.Row object at 0x000001477777DC60>, <sqlite3.Row object at 0x000001477777DC30>, <sqlite3.Row object at 0x000001477777DC00>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C370>, <sqlite3.Row object at 0x000001477777E2F0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777F490>]
2025-05-21 16:23:21,526 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>, <sqlite3.Row object at 0x000001477777E050>, <sqlite3.Row object at 0x000001477777E020>, <sqlite3.Row object at 0x000001477777DFF0>, <sqlite3.Row object at 0x000001477777DFC0>, <sqlite3.Row object at 0x000001477777DF90>, <sqlite3.Row object at 0x000001477777DF60>, <sqlite3.Row object at 0x000001477777DF30>, <sqlite3.Row object at 0x000001477777DF00>, <sqlite3.Row object at 0x000001477777DED0>, <sqlite3.Row object at 0x000001477777DEA0>, <sqlite3.Row object at 0x000001477777DE70>, <sqlite3.Row object at 0x000001477777DE40>, <sqlite3.Row object at 0x000001477777DE10>, <sqlite3.Row object at 0x000001477777DDE0>, <sqlite3.Row object at 0x000001477777DDB0>, <sqlite3.Row object at 0x000001477777DD80>, <sqlite3.Row object at 0x000001477777DD50>, <sqlite3.Row object at 0x000001477777DD20>, <sqlite3.Row object at 0x000001477777DCF0>, <sqlite3.Row object at 0x000001477777DCC0>, <sqlite3.Row object at 0x000001477777DC90>, <sqlite3.Row object at 0x000001477777DC60>, <sqlite3.Row object at 0x000001477777DC30>, <sqlite3.Row object at 0x000001477777DC00>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C370>, <sqlite3.Row object at 0x000001477777E2F0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777F490>]
2025-05-21 16:23:21,528 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,530 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,532 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,533 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,533 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,533 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,535 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,535 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,535 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,535 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,537 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,537 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,542 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:21,571 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:21,574 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777798280>]
2025-05-21 16:23:21,575 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:21,577 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:21,583 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:21,586 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:21,588 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:21,589 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:21,589 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:21,590 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:21,591 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:21,592 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:21,596 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:21,596 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:21,597 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:21,597 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:21,599 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:21,599 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x00000147777983D0>]
2025-05-21 16:23:21,600 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:21,601 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:21,602 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:21,602 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:21,602 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>]
2025-05-21 16:23:21,605 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>]
2025-05-21 16:23:21,605 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:21,606 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:21,606 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,607 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:21,607 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:21,608 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:21,608 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:21,609 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:21,609 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:21,612 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:21,614 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:21,614 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:21,616 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,671 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,672 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E680>, <sqlite3.Row object at 0x000001477777E560>, <sqlite3.Row object at 0x000001477777E740>, <sqlite3.Row object at 0x000001477777E1D0>, <sqlite3.Row object at 0x000001477777C2E0>, <sqlite3.Row object at 0x000001477777E260>, <sqlite3.Row object at 0x000001477777C700>, <sqlite3.Row object at 0x000001477777C3D0>, <sqlite3.Row object at 0x000001477777C880>, <sqlite3.Row object at 0x000001477777C0D0>, <sqlite3.Row object at 0x000001477777E3B0>]
2025-05-21 16:23:51,672 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,673 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,673 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,674 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,674 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,674 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,674 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,675 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,675 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,676 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,676 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,676 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,677 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,677 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,677 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,677 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777E3B0>, <sqlite3.Row object at 0x000001477777C340>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777E200>]
2025-05-21 16:23:51,677 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,677 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,677 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,677 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,683 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EEF0>, <sqlite3.Row object at 0x000001477777EEC0>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x000001477779A290>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x000001477779A800>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x0000014777799DB0>, <sqlite3.Row object at 0x0000014777799DE0>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779B5E0>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x000001477779A8C0>]
2025-05-21 16:23:51,684 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777E500>, <sqlite3.Row object at 0x000001477777E440>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EEF0>, <sqlite3.Row object at 0x000001477777EEC0>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x000001477779AFB0>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x000001477779A290>, <sqlite3.Row object at 0x0000014777798670>, <sqlite3.Row object at 0x000001477779A800>, <sqlite3.Row object at 0x000001477779AC20>, <sqlite3.Row object at 0x000001477779A260>, <sqlite3.Row object at 0x0000014777799DB0>, <sqlite3.Row object at 0x0000014777799DE0>, <sqlite3.Row object at 0x000001477779ABC0>, <sqlite3.Row object at 0x0000014777799630>, <sqlite3.Row object at 0x000001477779B5E0>, <sqlite3.Row object at 0x0000014777799ED0>, <sqlite3.Row object at 0x000001477779A8C0>]
2025-05-21 16:23:51,684 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,684 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,685 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,688 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,688 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,690 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,707 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,707 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799C60>]
2025-05-21 16:23:51,709 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,709 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,709 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,709 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,710 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,710 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,710 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777798400>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799210>]
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,712 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x000001477779A770>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x000001477779A350>]
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777799C90>, <sqlite3.Row object at 0x00000147777982B0>, <sqlite3.Row object at 0x000001477779A110>, <sqlite3.Row object at 0x000001477779A470>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x0000014777798C40>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779AE90>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x000001477779A770>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x000001477779A350>]
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,712 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,712 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,717 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,717 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,717 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,717 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,717 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,717 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,719 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,720 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,737 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,737 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777D330>, <sqlite3.Row object at 0x000001477777D2A0>, <sqlite3.Row object at 0x000001477777D270>, <sqlite3.Row object at 0x000001477777D240>, <sqlite3.Row object at 0x000001477777D210>, <sqlite3.Row object at 0x000001477777D1E0>, <sqlite3.Row object at 0x000001477777D1B0>, <sqlite3.Row object at 0x000001477777D180>, <sqlite3.Row object at 0x000001477777D150>, <sqlite3.Row object at 0x000001477777D120>, <sqlite3.Row object at 0x000001477777D0F0>, <sqlite3.Row object at 0x000001477777D0C0>]
2025-05-21 16:23:51,737 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,737 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,737 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,737 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,737 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,737 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,737 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,737 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,737 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,742 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,742 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,742 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,743 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,743 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,743 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,744 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777D330>, <sqlite3.Row object at 0x000001477777D0C0>, <sqlite3.Row object at 0x000001477777D090>, <sqlite3.Row object at 0x000001477777D060>, <sqlite3.Row object at 0x000001477777D030>]
2025-05-21 16:23:51,744 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,744 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,745 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,745 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,746 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777D060>, <sqlite3.Row object at 0x000001477777CFD0>, <sqlite3.Row object at 0x000001477777CFA0>, <sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CF40>, <sqlite3.Row object at 0x000001477777CF10>, <sqlite3.Row object at 0x000001477777CEE0>, <sqlite3.Row object at 0x000001477777CEB0>, <sqlite3.Row object at 0x000001477777CE80>, <sqlite3.Row object at 0x000001477777CE50>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>, <sqlite3.Row object at 0x000001477777E050>, <sqlite3.Row object at 0x000001477777E020>, <sqlite3.Row object at 0x000001477777DFF0>, <sqlite3.Row object at 0x000001477777DFC0>, <sqlite3.Row object at 0x000001477777DF90>, <sqlite3.Row object at 0x000001477777DF60>, <sqlite3.Row object at 0x000001477777DF30>, <sqlite3.Row object at 0x000001477777DF00>, <sqlite3.Row object at 0x000001477777DED0>, <sqlite3.Row object at 0x000001477777DEA0>, <sqlite3.Row object at 0x000001477777DE70>, <sqlite3.Row object at 0x000001477777DE40>, <sqlite3.Row object at 0x000001477777DE10>, <sqlite3.Row object at 0x000001477777DDE0>, <sqlite3.Row object at 0x000001477777DDB0>, <sqlite3.Row object at 0x000001477777DD80>, <sqlite3.Row object at 0x000001477777DD50>, <sqlite3.Row object at 0x000001477777DD20>, <sqlite3.Row object at 0x000001477777DCF0>, <sqlite3.Row object at 0x000001477777DCC0>, <sqlite3.Row object at 0x000001477777DC90>, <sqlite3.Row object at 0x000001477777DC60>, <sqlite3.Row object at 0x000001477777DC30>, <sqlite3.Row object at 0x000001477777DC00>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>]
2025-05-21 16:23:51,746 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777D060>, <sqlite3.Row object at 0x000001477777CFD0>, <sqlite3.Row object at 0x000001477777CFA0>, <sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CF40>, <sqlite3.Row object at 0x000001477777CF10>, <sqlite3.Row object at 0x000001477777CEE0>, <sqlite3.Row object at 0x000001477777CEB0>, <sqlite3.Row object at 0x000001477777CE80>, <sqlite3.Row object at 0x000001477777CE50>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>, <sqlite3.Row object at 0x000001477777E050>, <sqlite3.Row object at 0x000001477777E020>, <sqlite3.Row object at 0x000001477777DFF0>, <sqlite3.Row object at 0x000001477777DFC0>, <sqlite3.Row object at 0x000001477777DF90>, <sqlite3.Row object at 0x000001477777DF60>, <sqlite3.Row object at 0x000001477777DF30>, <sqlite3.Row object at 0x000001477777DF00>, <sqlite3.Row object at 0x000001477777DED0>, <sqlite3.Row object at 0x000001477777DEA0>, <sqlite3.Row object at 0x000001477777DE70>, <sqlite3.Row object at 0x000001477777DE40>, <sqlite3.Row object at 0x000001477777DE10>, <sqlite3.Row object at 0x000001477777DDE0>, <sqlite3.Row object at 0x000001477777DDB0>, <sqlite3.Row object at 0x000001477777DD80>, <sqlite3.Row object at 0x000001477777DD50>, <sqlite3.Row object at 0x000001477777DD20>, <sqlite3.Row object at 0x000001477777DCF0>, <sqlite3.Row object at 0x000001477777DCC0>, <sqlite3.Row object at 0x000001477777DC90>, <sqlite3.Row object at 0x000001477777DC60>, <sqlite3.Row object at 0x000001477777DC30>, <sqlite3.Row object at 0x000001477777DC00>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>]
2025-05-21 16:23:51,747 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,747 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,748 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,748 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,748 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,750 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,751 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,751 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,752 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,752 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,752 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,753 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,756 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,776 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,777 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x00000147777991B0>]
2025-05-21 16:23:51,777 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,778 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,778 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,778 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,779 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,779 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,779 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,780 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,780 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,780 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,781 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,781 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,782 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,782 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,782 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,783 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x000001477779A770>]
2025-05-21 16:23:51,783 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,785 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,785 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,786 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,786 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x000001477779B970>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B0D0>]
2025-05-21 16:23:51,787 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777798160>, <sqlite3.Row object at 0x000001477779AA40>, <sqlite3.Row object at 0x000001477779BEE0>, <sqlite3.Row object at 0x000001477779A680>, <sqlite3.Row object at 0x000001477779A6B0>, <sqlite3.Row object at 0x000001477779A710>, <sqlite3.Row object at 0x000001477779AC50>, <sqlite3.Row object at 0x0000014777799F60>, <sqlite3.Row object at 0x000001477779AF20>, <sqlite3.Row object at 0x000001477779A230>, <sqlite3.Row object at 0x00000147777989A0>, <sqlite3.Row object at 0x0000014777798580>, <sqlite3.Row object at 0x0000014777799720>, <sqlite3.Row object at 0x0000014777799F90>, <sqlite3.Row object at 0x000001477779B820>, <sqlite3.Row object at 0x00000147777985E0>, <sqlite3.Row object at 0x000001477779A350>, <sqlite3.Row object at 0x000001477779B490>, <sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x000001477779B970>, <sqlite3.Row object at 0x0000014777799210>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x0000014777798CD0>, <sqlite3.Row object at 0x0000014777798A60>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B0D0>]
2025-05-21 16:23:51,788 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,788 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,790 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,790 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,791 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,792 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,792 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,793 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,794 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,795 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,796 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,797 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,800 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,824 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,826 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777E9B0>, <sqlite3.Row object at 0x000001477777E950>, <sqlite3.Row object at 0x000001477777E920>, <sqlite3.Row object at 0x000001477777E980>, <sqlite3.Row object at 0x000001477777E9E0>, <sqlite3.Row object at 0x000001477777EA10>, <sqlite3.Row object at 0x000001477777EAA0>, <sqlite3.Row object at 0x000001477777EA70>, <sqlite3.Row object at 0x000001477777EE00>, <sqlite3.Row object at 0x000001477777EB00>, <sqlite3.Row object at 0x000001477777EA40>, <sqlite3.Row object at 0x000001477777F370>]
2025-05-21 16:23:51,826 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,827 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,827 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,827 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,828 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,828 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,828 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,829 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,829 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,830 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,830 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,830 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,831 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,831 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,831 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,832 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777E9B0>, <sqlite3.Row object at 0x000001477777F370>, <sqlite3.Row object at 0x000001477777F3A0>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777F280>]
2025-05-21 16:23:51,832 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,832 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,833 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,833 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,834 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777D690>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777EB60>, <sqlite3.Row object at 0x000001477777DA80>, <sqlite3.Row object at 0x000001477777DA20>, <sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777D6F0>, <sqlite3.Row object at 0x000001477777D480>, <sqlite3.Row object at 0x000001477777D5A0>, <sqlite3.Row object at 0x000001477777D540>, <sqlite3.Row object at 0x000001477777D510>, <sqlite3.Row object at 0x000001477777D4E0>, <sqlite3.Row object at 0x000001477777D4B0>, <sqlite3.Row object at 0x000001477777D570>, <sqlite3.Row object at 0x000001477777D390>, <sqlite3.Row object at 0x000001477777D990>, <sqlite3.Row object at 0x000001477777DAB0>, <sqlite3.Row object at 0x000001477777DA50>, <sqlite3.Row object at 0x000001477777EE90>, <sqlite3.Row object at 0x000001477777CD00>, <sqlite3.Row object at 0x000001477777D9C0>, <sqlite3.Row object at 0x000001477777D9F0>, <sqlite3.Row object at 0x000001477777D810>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777D3F0>, <sqlite3.Row object at 0x000001477777EBF0>, <sqlite3.Row object at 0x000001477777EBC0>, <sqlite3.Row object at 0x000001477777EC50>, <sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777D630>, <sqlite3.Row object at 0x000001477777D420>, <sqlite3.Row object at 0x000001477777D450>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777D3C0>, <sqlite3.Row object at 0x000001477777D8A0>, <sqlite3.Row object at 0x000001477777D840>, <sqlite3.Row object at 0x000001477777D7B0>, <sqlite3.Row object at 0x000001477777D780>, <sqlite3.Row object at 0x000001477777D870>, <sqlite3.Row object at 0x000001477777D8D0>, <sqlite3.Row object at 0x000001477777D900>, <sqlite3.Row object at 0x000001477777D930>, <sqlite3.Row object at 0x000001477777D7E0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>]
2025-05-21 16:23:51,835 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777D690>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777EB60>, <sqlite3.Row object at 0x000001477777DA80>, <sqlite3.Row object at 0x000001477777DA20>, <sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777D6F0>, <sqlite3.Row object at 0x000001477777D480>, <sqlite3.Row object at 0x000001477777D5A0>, <sqlite3.Row object at 0x000001477777D540>, <sqlite3.Row object at 0x000001477777D510>, <sqlite3.Row object at 0x000001477777D4E0>, <sqlite3.Row object at 0x000001477777D4B0>, <sqlite3.Row object at 0x000001477777D570>, <sqlite3.Row object at 0x000001477777D390>, <sqlite3.Row object at 0x000001477777D990>, <sqlite3.Row object at 0x000001477777DAB0>, <sqlite3.Row object at 0x000001477777DA50>, <sqlite3.Row object at 0x000001477777EE90>, <sqlite3.Row object at 0x000001477777CD00>, <sqlite3.Row object at 0x000001477777D9C0>, <sqlite3.Row object at 0x000001477777D9F0>, <sqlite3.Row object at 0x000001477777D810>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777D3F0>, <sqlite3.Row object at 0x000001477777EBF0>, <sqlite3.Row object at 0x000001477777EBC0>, <sqlite3.Row object at 0x000001477777EC50>, <sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777D630>, <sqlite3.Row object at 0x000001477777D420>, <sqlite3.Row object at 0x000001477777D450>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777D3C0>, <sqlite3.Row object at 0x000001477777D8A0>, <sqlite3.Row object at 0x000001477777D840>, <sqlite3.Row object at 0x000001477777D7B0>, <sqlite3.Row object at 0x000001477777D780>, <sqlite3.Row object at 0x000001477777D870>, <sqlite3.Row object at 0x000001477777D8D0>, <sqlite3.Row object at 0x000001477777D900>, <sqlite3.Row object at 0x000001477777D930>, <sqlite3.Row object at 0x000001477777D7E0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777C310>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777E3E0>, <sqlite3.Row object at 0x000001477777E290>, <sqlite3.Row object at 0x000001477777C3A0>, <sqlite3.Row object at 0x000001477777C670>, <sqlite3.Row object at 0x000001477777C520>]
2025-05-21 16:23:51,835 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,835 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,835 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,836 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,836 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,836 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,837 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,837 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,837 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,838 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,838 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,838 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,841 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,861 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,863 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777C760>, <sqlite3.Row object at 0x000001477777C790>, <sqlite3.Row object at 0x000001477777C160>, <sqlite3.Row object at 0x000001477777C1F0>, <sqlite3.Row object at 0x000001477777C130>, <sqlite3.Row object at 0x000001477777C190>, <sqlite3.Row object at 0x000001477777C100>, <sqlite3.Row object at 0x000001477777C1C0>, <sqlite3.Row object at 0x000001477777C220>, <sqlite3.Row object at 0x000001477777CAC0>, <sqlite3.Row object at 0x000001477777D060>, <sqlite3.Row object at 0x000001477777CFD0>]
2025-05-21 16:23:51,863 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,864 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,864 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,864 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,864 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,865 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,865 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,865 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,865 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,865 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,865 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,866 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,866 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,866 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,866 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,867 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777C760>, <sqlite3.Row object at 0x000001477777CFD0>, <sqlite3.Row object at 0x000001477777CFA0>, <sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CF40>]
2025-05-21 16:23:51,867 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,867 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,867 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,867 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,868 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CEE0>, <sqlite3.Row object at 0x000001477777CEB0>, <sqlite3.Row object at 0x000001477777CE80>, <sqlite3.Row object at 0x000001477777CE50>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>, <sqlite3.Row object at 0x000001477777E050>, <sqlite3.Row object at 0x000001477777E020>, <sqlite3.Row object at 0x000001477777DFF0>, <sqlite3.Row object at 0x000001477777DFC0>, <sqlite3.Row object at 0x000001477777DF90>, <sqlite3.Row object at 0x000001477777DF60>, <sqlite3.Row object at 0x000001477777DF30>, <sqlite3.Row object at 0x000001477777DF00>, <sqlite3.Row object at 0x000001477777DED0>, <sqlite3.Row object at 0x000001477777DEA0>, <sqlite3.Row object at 0x000001477777DE70>, <sqlite3.Row object at 0x000001477777DE40>, <sqlite3.Row object at 0x000001477777DE10>, <sqlite3.Row object at 0x000001477777DDE0>, <sqlite3.Row object at 0x000001477777DDB0>, <sqlite3.Row object at 0x000001477777DD80>, <sqlite3.Row object at 0x000001477777DD50>, <sqlite3.Row object at 0x000001477777DD20>, <sqlite3.Row object at 0x000001477777DCF0>, <sqlite3.Row object at 0x000001477777DCC0>, <sqlite3.Row object at 0x000001477777DC90>, <sqlite3.Row object at 0x000001477777DC60>, <sqlite3.Row object at 0x000001477777DC30>, <sqlite3.Row object at 0x000001477777DC00>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477779BBE0>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x000001477779A860>]
2025-05-21 16:23:51,868 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CEE0>, <sqlite3.Row object at 0x000001477777CEB0>, <sqlite3.Row object at 0x000001477777CE80>, <sqlite3.Row object at 0x000001477777CE50>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>, <sqlite3.Row object at 0x000001477777E050>, <sqlite3.Row object at 0x000001477777E020>, <sqlite3.Row object at 0x000001477777DFF0>, <sqlite3.Row object at 0x000001477777DFC0>, <sqlite3.Row object at 0x000001477777DF90>, <sqlite3.Row object at 0x000001477777DF60>, <sqlite3.Row object at 0x000001477777DF30>, <sqlite3.Row object at 0x000001477777DF00>, <sqlite3.Row object at 0x000001477777DED0>, <sqlite3.Row object at 0x000001477777DEA0>, <sqlite3.Row object at 0x000001477777DE70>, <sqlite3.Row object at 0x000001477777DE40>, <sqlite3.Row object at 0x000001477777DE10>, <sqlite3.Row object at 0x000001477777DDE0>, <sqlite3.Row object at 0x000001477777DDB0>, <sqlite3.Row object at 0x000001477777DD80>, <sqlite3.Row object at 0x000001477777DD50>, <sqlite3.Row object at 0x000001477777DD20>, <sqlite3.Row object at 0x000001477777DCF0>, <sqlite3.Row object at 0x000001477777DCC0>, <sqlite3.Row object at 0x000001477777DC90>, <sqlite3.Row object at 0x000001477777DC60>, <sqlite3.Row object at 0x000001477777DC30>, <sqlite3.Row object at 0x000001477777DC00>, <sqlite3.Row object at 0x000001477777FA60>, <sqlite3.Row object at 0x000001477777FAC0>, <sqlite3.Row object at 0x000001477777FA00>, <sqlite3.Row object at 0x000001477777F8E0>, <sqlite3.Row object at 0x000001477777F6D0>, <sqlite3.Row object at 0x000001477777F640>, <sqlite3.Row object at 0x000001477777F610>, <sqlite3.Row object at 0x000001477777F5E0>, <sqlite3.Row object at 0x000001477777F5B0>, <sqlite3.Row object at 0x000001477777F580>, <sqlite3.Row object at 0x000001477777E4A0>, <sqlite3.Row object at 0x000001477777E890>, <sqlite3.Row object at 0x000001477777E6B0>, <sqlite3.Row object at 0x000001477777E710>, <sqlite3.Row object at 0x000001477777E470>, <sqlite3.Row object at 0x000001477777E410>, <sqlite3.Row object at 0x000001477779BBE0>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x000001477779A860>]
2025-05-21 16:23:51,868 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,868 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,868 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,870 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,870 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,870 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,871 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,871 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,871 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,872 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,872 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,872 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,873 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,893 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,894 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777798DC0>, <sqlite3.Row object at 0x0000014777799C60>, <sqlite3.Row object at 0x000001477779BFD0>, <sqlite3.Row object at 0x0000014777799960>, <sqlite3.Row object at 0x000001477779B610>, <sqlite3.Row object at 0x000001477779B100>, <sqlite3.Row object at 0x00000147777987C0>, <sqlite3.Row object at 0x0000014777799B40>, <sqlite3.Row object at 0x000001477779BCA0>, <sqlite3.Row object at 0x000001477779BDC0>, <sqlite3.Row object at 0x0000014777798340>]
2025-05-21 16:23:51,894 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,896 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,896 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,896 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,897 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,897 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,897 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,897 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,897 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,898 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,898 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,898 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,898 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,899 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,900 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x0000014777799FF0>, <sqlite3.Row object at 0x0000014777798340>, <sqlite3.Row object at 0x000001477779B1C0>, <sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x0000014777798CD0>]
2025-05-21 16:23:51,900 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,900 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,901 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,902 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,902 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779A770>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777798C40>]
2025-05-21 16:23:51,903 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x00000147777990F0>, <sqlite3.Row object at 0x000001477779B7F0>, <sqlite3.Row object at 0x0000014777798760>, <sqlite3.Row object at 0x000001477779BA30>, <sqlite3.Row object at 0x0000014777798730>, <sqlite3.Row object at 0x0000014777798F40>, <sqlite3.Row object at 0x0000014777799060>, <sqlite3.Row object at 0x0000014777799030>, <sqlite3.Row object at 0x0000014777798E80>, <sqlite3.Row object at 0x000001477779BEB0>, <sqlite3.Row object at 0x0000014777798EB0>, <sqlite3.Row object at 0x0000014777799B10>, <sqlite3.Row object at 0x0000014777798700>, <sqlite3.Row object at 0x0000014777798370>, <sqlite3.Row object at 0x0000014777798DF0>, <sqlite3.Row object at 0x0000014777798D30>, <sqlite3.Row object at 0x000001477779BFA0>, <sqlite3.Row object at 0x000001477779B0D0>, <sqlite3.Row object at 0x000001477779A0E0>, <sqlite3.Row object at 0x000001477779A560>, <sqlite3.Row object at 0x000001477779A4D0>, <sqlite3.Row object at 0x0000014777798B80>, <sqlite3.Row object at 0x000001477779B9D0>, <sqlite3.Row object at 0x00000147777994E0>, <sqlite3.Row object at 0x000001477779A770>, <sqlite3.Row object at 0x0000014777798220>, <sqlite3.Row object at 0x00000147777991B0>, <sqlite3.Row object at 0x0000014777799E40>, <sqlite3.Row object at 0x000001477779B040>, <sqlite3.Row object at 0x0000014777799F00>, <sqlite3.Row object at 0x000001477779A500>, <sqlite3.Row object at 0x0000014777799750>, <sqlite3.Row object at 0x0000014777798820>, <sqlite3.Row object at 0x000001477779A3B0>, <sqlite3.Row object at 0x000001477779A590>, <sqlite3.Row object at 0x00000147777990C0>, <sqlite3.Row object at 0x0000014777798280>, <sqlite3.Row object at 0x0000014777799000>, <sqlite3.Row object at 0x000001477779BD90>, <sqlite3.Row object at 0x000001477779A1A0>, <sqlite3.Row object at 0x00000147777983D0>, <sqlite3.Row object at 0x000001477779A740>, <sqlite3.Row object at 0x000001477779BC40>, <sqlite3.Row object at 0x0000014777798A90>, <sqlite3.Row object at 0x000001477779AFE0>, <sqlite3.Row object at 0x000001477779A980>, <sqlite3.Row object at 0x000001477779A0B0>, <sqlite3.Row object at 0x000001477779B070>, <sqlite3.Row object at 0x0000014777799930>, <sqlite3.Row object at 0x0000014777799E10>, <sqlite3.Row object at 0x000001477779A170>, <sqlite3.Row object at 0x000001477779BBB0>, <sqlite3.Row object at 0x0000014777798C40>]
2025-05-21 16:23:51,903 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,903 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,903 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,903 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,904 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,904 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,905 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,905 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,906 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,906 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,907 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,907 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,909 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,928 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,930 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779ACB0>, <sqlite3.Row object at 0x000001477779AD10>, <sqlite3.Row object at 0x0000014777799D80>, <sqlite3.Row object at 0x000001477779B190>, <sqlite3.Row object at 0x000001477779A9E0>, <sqlite3.Row object at 0x000001477779B430>, <sqlite3.Row object at 0x000001477779A7D0>, <sqlite3.Row object at 0x00000147777997E0>, <sqlite3.Row object at 0x000001477779AE00>, <sqlite3.Row object at 0x0000014777799870>, <sqlite3.Row object at 0x000001477779A920>]
2025-05-21 16:23:51,930 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,931 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,931 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,932 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,932 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,932 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,932 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,933 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,933 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,933 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,934 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,934 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,935 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,935 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,935 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,936 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x00000147777984C0>, <sqlite3.Row object at 0x000001477779A920>, <sqlite3.Row object at 0x0000014777799840>, <sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x0000014777799900>]
2025-05-21 16:23:51,936 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,936 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,937 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,937 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,938 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x0000014777798460>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x000001477779BBE0>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777798490>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779A830>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477777DB10>, <sqlite3.Row object at 0x000001477777EDD0>, <sqlite3.Row object at 0x000001477777D300>, <sqlite3.Row object at 0x000001477777EB90>, <sqlite3.Row object at 0x000001477777CD60>, <sqlite3.Row object at 0x000001477777F310>, <sqlite3.Row object at 0x000001477777DBA0>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C760>, <sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CEE0>, <sqlite3.Row object at 0x000001477777CEB0>, <sqlite3.Row object at 0x000001477777CE80>, <sqlite3.Row object at 0x000001477777CE50>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>]
2025-05-21 16:23:51,938 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x0000014777799450>, <sqlite3.Row object at 0x000001477779B7C0>, <sqlite3.Row object at 0x000001477779BC70>, <sqlite3.Row object at 0x0000014777798FD0>, <sqlite3.Row object at 0x000001477779A2C0>, <sqlite3.Row object at 0x000001477779B550>, <sqlite3.Row object at 0x00000147777994B0>, <sqlite3.Row object at 0x0000014777799CC0>, <sqlite3.Row object at 0x0000014777799A20>, <sqlite3.Row object at 0x0000014777798460>, <sqlite3.Row object at 0x000001477779AB30>, <sqlite3.Row object at 0x000001477779B880>, <sqlite3.Row object at 0x000001477779A5F0>, <sqlite3.Row object at 0x00000147777984F0>, <sqlite3.Row object at 0x000001477779ADA0>, <sqlite3.Row object at 0x0000014777799270>, <sqlite3.Row object at 0x000001477779BBE0>, <sqlite3.Row object at 0x000001477779ACE0>, <sqlite3.Row object at 0x0000014777799AE0>, <sqlite3.Row object at 0x000001477779BE20>, <sqlite3.Row object at 0x000001477779A860>, <sqlite3.Row object at 0x00000147777981F0>, <sqlite3.Row object at 0x000001477779B940>, <sqlite3.Row object at 0x000001477779A950>, <sqlite3.Row object at 0x0000014777798490>, <sqlite3.Row object at 0x00000147777993C0>, <sqlite3.Row object at 0x000001477779B340>, <sqlite3.Row object at 0x0000014777798940>, <sqlite3.Row object at 0x000001477779A830>, <sqlite3.Row object at 0x000001477779A890>, <sqlite3.Row object at 0x0000014777799090>, <sqlite3.Row object at 0x00000147777993F0>, <sqlite3.Row object at 0x000001477779B760>, <sqlite3.Row object at 0x0000014777798E50>, <sqlite3.Row object at 0x000001477779AEF0>, <sqlite3.Row object at 0x000001477779BAF0>, <sqlite3.Row object at 0x000001477777DB10>, <sqlite3.Row object at 0x000001477777EDD0>, <sqlite3.Row object at 0x000001477777D300>, <sqlite3.Row object at 0x000001477777EB90>, <sqlite3.Row object at 0x000001477777CD60>, <sqlite3.Row object at 0x000001477777F310>, <sqlite3.Row object at 0x000001477777DBA0>, <sqlite3.Row object at 0x000001477777C580>, <sqlite3.Row object at 0x000001477777C760>, <sqlite3.Row object at 0x000001477777CF70>, <sqlite3.Row object at 0x000001477777CEE0>, <sqlite3.Row object at 0x000001477777CEB0>, <sqlite3.Row object at 0x000001477777CE80>, <sqlite3.Row object at 0x000001477777CE50>, <sqlite3.Row object at 0x000001477777E140>, <sqlite3.Row object at 0x000001477777E0B0>, <sqlite3.Row object at 0x000001477777E080>]
2025-05-21 16:23:51,938 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,939 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,939 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,939 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,939 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,940 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,940 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,940 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,940 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,940 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,941 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,941 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,943 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,962 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,963 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777EFB0>]
2025-05-21 16:23:51,964 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,964 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,964 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,965 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,965 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:51,965 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:51,965 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:51,966 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:51,966 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:51,966 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:51,966 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:51,967 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:51,967 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:51,967 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:51,967 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:51,969 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777F220>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EF20>]
2025-05-21 16:23:51,969 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:51,969 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:51,970 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:51,970 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:51,970 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EEC0>, <sqlite3.Row object at 0x000001477777CA60>, <sqlite3.Row object at 0x000001477777C9D0>, <sqlite3.Row object at 0x000001477777C910>, <sqlite3.Row object at 0x000001477777C040>, <sqlite3.Row object at 0x000001477777C8E0>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777D690>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777EB60>, <sqlite3.Row object at 0x000001477777DA80>, <sqlite3.Row object at 0x000001477777DA20>, <sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777D6F0>, <sqlite3.Row object at 0x000001477777D480>, <sqlite3.Row object at 0x000001477777D5A0>, <sqlite3.Row object at 0x000001477777D540>, <sqlite3.Row object at 0x000001477777D510>, <sqlite3.Row object at 0x000001477777D4E0>, <sqlite3.Row object at 0x000001477777D4B0>, <sqlite3.Row object at 0x000001477777D570>, <sqlite3.Row object at 0x000001477777D390>, <sqlite3.Row object at 0x000001477777D990>, <sqlite3.Row object at 0x000001477777DAB0>, <sqlite3.Row object at 0x000001477777DA50>, <sqlite3.Row object at 0x000001477777EE90>, <sqlite3.Row object at 0x000001477777CD00>, <sqlite3.Row object at 0x000001477777D9C0>, <sqlite3.Row object at 0x000001477777D9F0>, <sqlite3.Row object at 0x000001477777D810>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777D3F0>, <sqlite3.Row object at 0x000001477777EBF0>, <sqlite3.Row object at 0x000001477777EBC0>, <sqlite3.Row object at 0x000001477777EC50>, <sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777D630>, <sqlite3.Row object at 0x000001477777D420>, <sqlite3.Row object at 0x000001477777D450>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777D3C0>, <sqlite3.Row object at 0x000001477777D8A0>, <sqlite3.Row object at 0x000001477777D840>, <sqlite3.Row object at 0x000001477777D7B0>, <sqlite3.Row object at 0x000001477777D780>, <sqlite3.Row object at 0x000001477777D870>, <sqlite3.Row object at 0x000001477777D8D0>, <sqlite3.Row object at 0x000001477777D900>, <sqlite3.Row object at 0x000001477777D930>, <sqlite3.Row object at 0x000001477777D7E0>, <sqlite3.Row object at 0x000001477777E530>]
2025-05-21 16:23:51,971 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777EF50>, <sqlite3.Row object at 0x000001477777EEC0>, <sqlite3.Row object at 0x000001477777CA60>, <sqlite3.Row object at 0x000001477777C9D0>, <sqlite3.Row object at 0x000001477777C910>, <sqlite3.Row object at 0x000001477777C040>, <sqlite3.Row object at 0x000001477777C8E0>, <sqlite3.Row object at 0x000001477777F460>, <sqlite3.Row object at 0x000001477777D690>, <sqlite3.Row object at 0x000001477777F340>, <sqlite3.Row object at 0x000001477777F2B0>, <sqlite3.Row object at 0x000001477777EB60>, <sqlite3.Row object at 0x000001477777DA80>, <sqlite3.Row object at 0x000001477777DA20>, <sqlite3.Row object at 0x000001477777ECE0>, <sqlite3.Row object at 0x000001477777D6F0>, <sqlite3.Row object at 0x000001477777D480>, <sqlite3.Row object at 0x000001477777D5A0>, <sqlite3.Row object at 0x000001477777D540>, <sqlite3.Row object at 0x000001477777D510>, <sqlite3.Row object at 0x000001477777D4E0>, <sqlite3.Row object at 0x000001477777D4B0>, <sqlite3.Row object at 0x000001477777D570>, <sqlite3.Row object at 0x000001477777D390>, <sqlite3.Row object at 0x000001477777D990>, <sqlite3.Row object at 0x000001477777DAB0>, <sqlite3.Row object at 0x000001477777DA50>, <sqlite3.Row object at 0x000001477777EE90>, <sqlite3.Row object at 0x000001477777CD00>, <sqlite3.Row object at 0x000001477777D9C0>, <sqlite3.Row object at 0x000001477777D9F0>, <sqlite3.Row object at 0x000001477777D810>, <sqlite3.Row object at 0x000001477777E5C0>, <sqlite3.Row object at 0x000001477777D3F0>, <sqlite3.Row object at 0x000001477777EBF0>, <sqlite3.Row object at 0x000001477777EBC0>, <sqlite3.Row object at 0x000001477777EC50>, <sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777D630>, <sqlite3.Row object at 0x000001477777D420>, <sqlite3.Row object at 0x000001477777D450>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777D3C0>, <sqlite3.Row object at 0x000001477777D8A0>, <sqlite3.Row object at 0x000001477777D840>, <sqlite3.Row object at 0x000001477777D7B0>, <sqlite3.Row object at 0x000001477777D780>, <sqlite3.Row object at 0x000001477777D870>, <sqlite3.Row object at 0x000001477777D8D0>, <sqlite3.Row object at 0x000001477777D900>, <sqlite3.Row object at 0x000001477777D930>, <sqlite3.Row object at 0x000001477777D7E0>, <sqlite3.Row object at 0x000001477777E530>]
2025-05-21 16:23:51,971 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:51,971 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:51,972 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,972 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:51,972 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:51,973 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:51,973 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:51,973 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:51,974 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:51,974 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:51,974 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:51,974 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:51,976 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
2025-05-21 16:23:51,997 - admin_debug - INFO - Iniciando carregamento do dashboard administrativo
2025-05-21 16:23:51,998 - admin_debug - DEBUG - TABELAS NO BANCO: [<sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777D450>, <sqlite3.Row object at 0x000001477777F2E0>, <sqlite3.Row object at 0x000001477777D3C0>, <sqlite3.Row object at 0x000001477777D8A0>, <sqlite3.Row object at 0x000001477777D840>, <sqlite3.Row object at 0x000001477777D7B0>, <sqlite3.Row object at 0x000001477777D780>, <sqlite3.Row object at 0x000001477777D870>, <sqlite3.Row object at 0x000001477777D8D0>, <sqlite3.Row object at 0x000001477777D900>, <sqlite3.Row object at 0x000001477777D930>]
2025-05-21 16:23:51,999 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios
2025-05-21 16:23:51,999 - admin_debug - DEBUG - Total de usuários: 8
2025-05-21 16:23:51,999 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'admin'
2025-05-21 16:23:51,999 - admin_debug - DEBUG - Total de admins: 5
2025-05-21 16:23:51,999 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'comum'
2025-05-21 16:23:52,000 - admin_debug - DEBUG - Total de usuários comuns: 1
2025-05-21 16:23:52,000 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM usuarios WHERE nivel = 'gr'
2025-05-21 16:23:52,000 - admin_debug - DEBUG - Total de usuários GR: 2
2025-05-21 16:23:52,000 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_senha'
2025-05-21 16:23:52,001 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_senha WHERE status = 'pendente'
2025-05-21 16:23:52,001 - admin_debug - DEBUG - Solicitações de senha pendentes: 1
2025-05-21 16:23:52,001 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='solicitacoes_registro'
2025-05-21 16:23:52,001 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM solicitacoes_registro WHERE status = 'pendente'
2025-05-21 16:23:52,002 - admin_debug - DEBUG - Solicitações de registro pendentes: 2
2025-05-21 16:23:52,002 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='logs'
2025-05-21 16:23:52,002 - admin_debug - DEBUG - SCHEMA DE logs: [<sqlite3.Row object at 0x000001477777EC20>, <sqlite3.Row object at 0x000001477777D930>, <sqlite3.Row object at 0x000001477777D7E0>, <sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777EEF0>]
2025-05-21 16:23:52,002 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='usuarios'
2025-05-21 16:23:52,003 - admin_debug - DEBUG - QUERY SQL: 
                            SELECT l.*, u.username
                            FROM logs l
                            LEFT JOIN usuarios u ON l.usuario = u.username
                            ORDER BY l.data DESC
                            LIMIT 10
                        
2025-05-21 16:23:52,003 - admin_debug - DEBUG - Logs recentes: 1 registros
2025-05-21 16:23:52,003 - admin_debug - DEBUG - QUERY SQL: SELECT name FROM sqlite_master WHERE type='table' AND name='registros'
2025-05-21 16:23:52,003 - admin_debug - DEBUG - SCHEMA DE registros: [<sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777CCA0>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777DBD0>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777E9B0>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777F490>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777CBE0>, <sqlite3.Row object at 0x000001477777C070>, <sqlite3.Row object at 0x000001477777CC10>, <sqlite3.Row object at 0x000001477777CD30>, <sqlite3.Row object at 0x000001477777D600>, <sqlite3.Row object at 0x000001477777C2B0>, <sqlite3.Row object at 0x000001477777C4F0>, <sqlite3.Row object at 0x000001477777DB70>, <sqlite3.Row object at 0x000001477777CB50>, <sqlite3.Row object at 0x000001477777C5E0>, <sqlite3.Row object at 0x000001477777CB20>, <sqlite3.Row object at 0x000001477777C430>, <sqlite3.Row object at 0x000001477777C400>, <sqlite3.Row object at 0x000001477777E8F0>, <sqlite3.Row object at 0x000001477777CE20>, <sqlite3.Row object at 0x000001477777C4C0>, <sqlite3.Row object at 0x000001477777CAF0>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777CC40>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777CCD0>, <sqlite3.Row object at 0x000001477777C460>, <sqlite3.Row object at 0x000001477777CC70>, <sqlite3.Row object at 0x000001477777D330>, <sqlite3.Row object at 0x000001477777CBB0>]
2025-05-21 16:23:52,005 - admin_debug - DEBUG - Colunas na tabela registros: [<sqlite3.Row object at 0x000001477777E530>, <sqlite3.Row object at 0x000001477777C0A0>, <sqlite3.Row object at 0x000001477777EF20>, <sqlite3.Row object at 0x000001477777EF80>, <sqlite3.Row object at 0x000001477777EFB0>, <sqlite3.Row object at 0x000001477777EFE0>, <sqlite3.Row object at 0x000001477777F010>, <sqlite3.Row object at 0x000001477777F040>, <sqlite3.Row object at 0x000001477777F070>, <sqlite3.Row object at 0x000001477777F0A0>, <sqlite3.Row object at 0x000001477777F0D0>, <sqlite3.Row object at 0x000001477777F100>, <sqlite3.Row object at 0x000001477777F130>, <sqlite3.Row object at 0x000001477777F160>, <sqlite3.Row object at 0x000001477777F190>, <sqlite3.Row object at 0x000001477777F1C0>, <sqlite3.Row object at 0x000001477777F550>, <sqlite3.Row object at 0x000001477777CCA0>, <sqlite3.Row object at 0x000001477777F1F0>, <sqlite3.Row object at 0x000001477777DBD0>, <sqlite3.Row object at 0x000001477777E320>, <sqlite3.Row object at 0x000001477777E4D0>, <sqlite3.Row object at 0x000001477777E9B0>, <sqlite3.Row object at 0x000001477777E350>, <sqlite3.Row object at 0x000001477777F490>, <sqlite3.Row object at 0x000001477777F4C0>, <sqlite3.Row object at 0x000001477777C250>, <sqlite3.Row object at 0x000001477777F520>, <sqlite3.Row object at 0x000001477777CBE0>, <sqlite3.Row object at 0x000001477777C070>, <sqlite3.Row object at 0x000001477777CC10>, <sqlite3.Row object at 0x000001477777CD30>, <sqlite3.Row object at 0x000001477777D600>, <sqlite3.Row object at 0x000001477777C2B0>, <sqlite3.Row object at 0x000001477777C4F0>, <sqlite3.Row object at 0x000001477777DB70>, <sqlite3.Row object at 0x000001477777CB50>, <sqlite3.Row object at 0x000001477777C5E0>, <sqlite3.Row object at 0x000001477777CB20>, <sqlite3.Row object at 0x000001477777C430>, <sqlite3.Row object at 0x000001477777C400>, <sqlite3.Row object at 0x000001477777E8F0>, <sqlite3.Row object at 0x000001477777CE20>, <sqlite3.Row object at 0x000001477777C4C0>, <sqlite3.Row object at 0x000001477777CAF0>, <sqlite3.Row object at 0x000001477777F4F0>, <sqlite3.Row object at 0x000001477777CC40>, <sqlite3.Row object at 0x000001477777C8B0>, <sqlite3.Row object at 0x000001477777CCD0>, <sqlite3.Row object at 0x000001477777C460>, <sqlite3.Row object at 0x000001477777CC70>, <sqlite3.Row object at 0x000001477777D330>, <sqlite3.Row object at 0x000001477777CBB0>]
2025-05-21 16:23:52,005 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE excluido = 0
2025-05-21 16:23:52,005 - admin_debug - DEBUG - Total de registros: 0
2025-05-21 16:23:52,006 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_registro >= date('now', '-7 days') AND excluido = 0
2025-05-21 16:23:52,006 - admin_debug - DEBUG - Registros da última semana: 0
2025-05-21 16:23:52,006 - admin_debug - DEBUG - QUERY SQL: PRAGMA table_info(registros)
2025-05-21 16:23:52,007 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) FROM registros WHERE data_modificacao >= datetime('now', '-7 days') AND excluido = 0
2025-05-21 16:23:52,007 - admin_debug - DEBUG - Registros atualizados na última semana: 0
2025-05-21 16:23:52,007 - admin_debug - DEBUG - QUERY SQL: SELECT COUNT(*) as total FROM registros WHERE alteracoes_verificadas = 1 AND excluido = 0
2025-05-21 16:23:52,007 - admin_debug - DEBUG - Total de alterações verificadas: 0
2025-05-21 16:23:52,007 - admin_debug - DEBUG - QUERY SQL: 
                        SELECT usuario, COUNT(*) as total_acoes
                        FROM logs
                        GROUP BY usuario
                        ORDER BY total_acoes DESC
                        LIMIT 5
                    
2025-05-21 16:23:52,007 - admin_debug - DEBUG - Atividade por usuário: 1 registros
2025-05-21 16:23:52,008 - admin_debug - INFO - Dashboard administrativo carregado com sucesso
2025-05-21 16:23:52,010 - admin_debug - ERROR - Erro detalhado ao carregar dashboard administrativo: Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
Traceback (most recent call last):
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\admin_routes.py", line 367, in admin_dashboard
    return render_template('admin_dashboard.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Users\leonardo.fragoso\AppData\Local\Programs\Python\Python311\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\leonardo.fragoso\Desktop\Projetos\Atendimento GR\templates\admin_dashboard.html", line 310, in top-level template code
    {% set percentage = (campo.total / max_total) * 100 if max_total > 0 else 0 %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'total'
